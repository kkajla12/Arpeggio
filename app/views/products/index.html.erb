<div class="product-action">
  <%= form_tag(products_path, :method => "get", class: "product-search-form") do %>
    <%= text_field_tag :keyword, params[:keyword], placeholder: "Search Products" %>
    <%= select_tag :classification,
        options_for_select([["Filter by...", ""], "guitar", "bass", "keyboard",
                            "violin", "accessory", "speaker",
                            "combo amplifier", "amplifier cabinet",
                            "amplifier head", "cable", "mic"],
                            selected: params[:classification] ? params[:classification] : "Filter by...")
    %>
    <%= submit_tag "Search", :name => nil, class: "button" %>
  <% end %>

  <%= link_to '+ Add Product', new_product_path, class: "button" %>
</div>

<div class="products">
  <% @products.each do |product| %>
    <div class="product">
      <div class="container-img">
        <a href="/products/<%= product.id %>">
          <%= image_tag product.image.url %>
        </a>
      </div>

      <h3>
        <a href="/products/<%= product.id %>"><%= product.name %></a>
      </h3>

      <h4 class="product-type">
        <%= link_to "#{product.classification}", products_path(classification: product.classification) %>
      </h4>

      <h4 class="product-price-wrapper">
        <span class="product-price">$<%= "#{'%.02f' % product.price}" %></span>/day & <span class="product-price">$<%= "#{'%.02f' % product.deposit}" %></span> deposit
      </h4>

      <h4 class="product-status-wrapper">
        Status:
        <span class="product-status-<%= product.rented ? "rented" : "available" %>">
          <% if product.rented %>
            Not Available
          <% else %>
            Available
          <% end %>
        </span>
      </h4>

      <%= button_to 'Add to Cart', line_items_path(product_id: product), class: "button" %>
    </div>
  <% end %>
</div>

<%= will_paginate @products %>
